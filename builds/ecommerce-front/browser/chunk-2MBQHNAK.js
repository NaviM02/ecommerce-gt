import{a as O}from"./chunk-3VFHTPS6.js";import{a as w}from"./chunk-2YJE5SZQ.js";import{a as y}from"./chunk-RYMPJAZU.js";import"./chunk-CTBSQTUV.js";import"./chunk-NCCT54UK.js";import"./chunk-FDP5RWEF.js";import"./chunk-XALT67XN.js";import{h as E}from"./chunk-HGKDJBZM.js";import{Cb as o,Db as c,Eb as f,Ga as d,Gb as g,Hb as _,Ib as C,La as S,Pa as b,Pb as h,Rb as u,Ua as D,db as T,gb as P,hb as v,ib as e,jb as t,kb as m,sb as s,tb as x}from"./chunk-DN3HB7UR.js";import"./chunk-PYEHUVGI.js";var I=(a,n)=>n.userId;function M(a,n){a&1&&(e(0,"tr")(1,"td",12),o(2,"Cargando..."),t()())}function F(a,n){a&1&&(e(0,"tr")(1,"td",12),o(2,"No hay datos"),t()())}function W(a,n){if(a&1&&(e(0,"tr")(1,"td"),o(2),t(),e(3,"td"),o(4),t(),e(5,"td"),o(6),h(7,"number"),t(),e(8,"td"),o(9),h(10,"number"),t()()),a&2){let r=n.$implicit,i=n.$index;d(2),c(i+1),d(2),c(r.fullName),d(2),f("Q ",u(7,4,r.totalEarned*.95,"1.2-2"),""),d(3),f("Q ",u(10,7,r.totalEarned*.05,"1.2-2"),"")}}function B(a,n){if(a&1&&P(0,W,11,10,"tr",null,I),a&2){let r=x();v(r.sellers)}}var k=class a{constructor(n){this.reportService=n;let r=new Date,i=new Date(r.getFullYear(),0,1),p=new Date(r.getFullYear(),11,31);this.startDate=i.toISOString(),this.endDate=p.toISOString()}sellers=[];startDate;endDate;loading=!1;ngOnInit(){this.loadData()}loadData(){this.loading=!0,this.reportService.getTopSellers(this.startDate,this.endDate).subscribe({next:n=>{this.sellers=n,this.loading=!1},error:()=>{this.loading=!1}})}onStartDateChange(n){this.startDate=n}onEndDateChange(n){this.endDate=n}onFilter(){this.loadData()}static \u0275fac=function(r){return new(r||a)(S(w))};static \u0275cmp=b({type:a,selectors:[["app-top-clients-profit"]],decls:33,vars:3,consts:[[1,"main-container"],[1,"body-container"],[1,"list-page-header-container"],["title","Top Vendedores","description","Vendedores con mayores ingresos en el rango de fechas seleccionado"],[1,"body","bg-white","h-100"],[1,"table-main-container","d-flex","flex-column","gap-3","h-60"],[1,"table-actions","d-flex","align-items-center","gap-3"],[1,"form-label","fw-bold","mb-1"],[3,"modelChange","model"],[1,"btn","btn-primary",3,"click"],[1,"table-container"],[1,"table","sticky-header"],["colspan","3",1,"text-center","py-3","text-muted"]],template:function(r,i){r&1&&(e(0,"div",0)(1,"div",1)(2,"div",2),m(3,"app-list-page-header",3),t(),e(4,"div",4)(5,"div",5)(6,"div",6)(7,"div")(8,"label",7),o(9,"Fecha inicio"),t(),e(10,"app-single-datepicker",8),C("modelChange",function(l){return _(i.startDate,l)||(i.startDate=l),l}),s("modelChange",function(l){return i.onStartDateChange(l)}),t()(),e(11,"div")(12,"label",7),o(13,"Fecha fin"),t(),e(14,"app-single-datepicker",8),C("modelChange",function(l){return _(i.endDate,l)||(i.endDate=l),l}),s("modelChange",function(l){return i.onEndDateChange(l)}),t()(),e(15,"div"),m(16,"label",7),e(17,"button",9),s("click",function(){return i.onFilter()}),o(18,"Filtrar"),t()()(),e(19,"div",10)(20,"table",11)(21,"tr")(22,"th"),o(23,"#"),t(),e(24,"th"),o(25,"Vendedor"),t(),e(26,"th"),o(27,"Total Ganado"),t(),e(28,"th"),o(29,"Aplicaci\xF3n (5%)"),t()(),D(30,M,3,0,"tr")(31,F,3,0,"tr")(32,B,2,0),t()()()()()()),r&2&&(d(10),g("model",i.startDate),d(4),g("model",i.endDate),d(16),T(i.loading?30:i.sellers.length===0?31:32))},dependencies:[y,O,E],styles:[".table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600;background-color:#f8f9fa}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.75rem}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f1f3f5}"]})};export{k as TopClientsProfitComponent};
