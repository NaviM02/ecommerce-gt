import{a as P,b as W}from"./chunk-CD5EVJVO.js";import{a as b}from"./chunk-Q5ZSNGML.js";import{a as E}from"./chunk-GYVK5SZF.js";import{c as T}from"./chunk-QNPVVT5S.js";import{a as F}from"./chunk-NXHING3N.js";import"./chunk-IN5T55Q3.js";import{e as S,f as v,m as M}from"./chunk-XALT67XN.js";import{a as I}from"./chunk-5UWBJBBU.js";import{o as C,p as y}from"./chunk-HGKDJBZM.js";import{Cb as o,Ga as r,Gb as a,Hb as s,Ib as l,Kb as w,La as m,Pa as f,_a as h,ib as n,jb as i,kb as d,sb as _}from"./chunk-DN3HB7UR.js";import"./chunk-PYEHUVGI.js";var x=()=>["/c/login"],N=class g{constructor(c,u,t){this.userService=c;this.toastService=u;this.router=t}user=new T;confirmPassword="";role={roleId:2,roleName:"COMUN"};ngOnInit(){}create(){if(!this.isValid)return this.toastService.warning("Llene todo el formulario");if(this.user.password!==this.confirmPassword)return this.toastService.warning("Las contrase\xF1as no son iguales.");this.user.role=this.role,this.userService.save(this.user).subscribe({next:()=>{this.toastService.success("Tus cambios se guardaron con exito"),this.router.navigate(["/c/login"])},error:c=>{if(c.error=="client_email_must_be_unique")return this.toastService.error("msg_client_email_already_exists");this.toastService.error("msg_error_server")}})}get isValid(){return!!this.user.fullName&&!!this.user.email&&!!this.user.password&&!!this.user.phone&&this.user.fullName.trim()!==""&&this.user.email.trim()!==""&&this.user.password.trim()!==""&&this.user.phone.trim()!==""}static \u0275fac=function(u){return new(u||g)(m(F),m(I),m(C))};static \u0275cmp=f({type:g,selectors:[["app-create-account-page"]],decls:43,vars:8,consts:[[1,"w-100","vh-100","create-account-page"],[1,"row","h-100"],[1,"col-12","col-md-6","h-100","d-none","d-md-block"],[1,"col-12","col-md-6","h-100","d-flex","align-items-center"],[1,"d-flex","justify-content-between","flex-column","gap-3","w-50","p-0","mx-auto"],[1,"h4"],[1,"m-0"],[1,"form-group"],["id","full-name",1,"required-field"],["inputType","text","placeholder","Ej. Ericka Andrea Toj Ordo\xF1ez","icon","account_box","iconPosition","left",3,"ngModelChange","ngModel"],["inputType","text","placeholder","Ej. ericka.toj","icon","account_box","iconPosition","left",3,"ngModelChange","ngModel"],["id","phone-number",1,"required-field"],[1,"d-flex","gap-1"],[1,"flex-grow-1"],["inputType","text","placeholder","Ej. 1234 5678","icon","call","iconPosition","left",3,"ngModelChange","ngModel"],["id","email",1,"required-field"],["inputType","text","placeholder","Ej. direcci\xF3n@correo.com","icon","email","iconPosition","left",3,"ngModelChange","ngModel"],["id","password",1,"required-field"],["placeholder","Ingrese su contrase\xF1a","iconPosition","left",3,"ngModelChange","ngModel"],["placeholder","Ingrese otra vez su contrase\xF1a","iconPosition","left",3,"ngModelChange","ngModel"],["type","button",1,"btn","btn-primary",3,"click"],[1,"m-0","text-center"],["role","button",1,"fw-bold","text-secondary","mx-auto","hover-bs-primary",3,"routerLink"]],template:function(u,t){u&1&&(n(0,"main",0)(1,"div",1)(2,"div",2),d(3,"app-login-banner"),i(),n(4,"div",3)(5,"div",4)(6,"p",5),o(7,"Crear cuenta"),i(),n(8,"p",6),o(9,"Ingresa tus datos para crear una cuenta y acceder al sistema."),i(),d(10,"app-required-indicator"),n(11,"div",7)(12,"label",8),o(13,"Nombre completo"),i(),n(14,"app-input-with-icon",9),l("ngModelChange",function(e){return s(t.user.fullName,e)||(t.user.fullName=e),e}),i()(),n(15,"div",7)(16,"label",8),o(17,"Nombre de usuario"),i(),n(18,"app-input-with-icon",10),l("ngModelChange",function(e){return s(t.user.username,e)||(t.user.username=e),e}),i()(),n(19,"div",7)(20,"label",11),o(21,"Tel\xE9fono"),i(),n(22,"div",12)(23,"div",13)(24,"app-input-with-icon",14),l("ngModelChange",function(e){return s(t.user.phone,e)||(t.user.phone=e),e}),i()()()(),n(25,"div",7)(26,"label",15),o(27,"Correo electr\xF3nico"),i(),n(28,"app-input-with-icon",16),l("ngModelChange",function(e){return s(t.user.email,e)||(t.user.email=e),e}),i()(),n(29,"div",7)(30,"label",17),o(31,"Contrase\xF1a"),i(),n(32,"app-input-for-password",18),l("ngModelChange",function(e){return s(t.user.password,e)||(t.user.password=e),e}),i()(),n(33,"div",7)(34,"label",17),o(35,"Confirmar contrase\xF1a"),i(),n(36,"app-input-for-password",19),l("ngModelChange",function(e){return s(t.confirmPassword,e)||(t.confirmPassword=e),e}),i()(),n(37,"button",20),_("click",function(){return t.create()}),o(38,"Crear cuenta"),i(),n(39,"p",21),o(40,"\xBFYa tienes una cuenta?"),i(),n(41,"span",22),o(42," Ir a inicio de sesi\xF3n "),i()()()()()),u&2&&(r(14),a("ngModel",t.user.fullName),r(4),a("ngModel",t.user.username),r(6),a("ngModel",t.user.phone),r(4),a("ngModel",t.user.email),r(4),a("ngModel",t.user.password),r(4),a("ngModel",t.confirmPassword),r(5),h("routerLink",w(7,x)))},dependencies:[b,P,W,E,M,S,v,y],encapsulation:2})};export{N as CreateAccountPageComponent};
