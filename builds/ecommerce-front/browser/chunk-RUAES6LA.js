import{a as W}from"./chunk-JM2MAADB.js";import"./chunk-BYXBJQAS.js";import{a as q}from"./chunk-WEV7XX4Q.js";import{a as O}from"./chunk-BBI2T2QI.js";import{a as V}from"./chunk-RYMPJAZU.js";import{a as B,b as D}from"./chunk-BFNUI43J.js";import"./chunk-NCCT54UK.js";import"./chunk-FDP5RWEF.js";import{a as N}from"./chunk-IN5T55Q3.js";import{c as L,e as R,f as F,m as k}from"./chunk-XALT67XN.js";import{a as j}from"./chunk-5UWBJBBU.js";import{t as U}from"./chunk-HGKDJBZM.js";import{Cb as o,Db as a,Ea as y,Ga as t,Gb as T,Hb as w,Ib as A,Kb as M,La as m,Lb as S,Pa as C,_a as l,gb as I,hb as P,ia as _,ib as r,ja as x,jb as i,kb as v,ob as b,sb as f,tb as h,wb as E}from"./chunk-DN3HB7UR.js";import{c as g}from"./chunk-PYEHUVGI.js";var H=()=>["/user/my-products/add"],Q=d=>["/user/my-products",d],$=d=>["/user/my-products/edit",d],G=(d,n)=>n.productId;function J(d,n){if(d&1){let e=b();r(0,"tr")(1,"td"),v(2,"img",16),i(),r(3,"td"),o(4),i(),r(5,"td"),o(6),i(),r(7,"td"),o(8),i(),r(9,"td"),o(10),i(),r(11,"td"),v(12,"app-status-product-badge",17),i(),r(13,"td",18)(14,"app-table-row-action",19),f("deleteAction",function(){let u=_(e).$implicit,s=h();return x(s.delete(u.productId))}),i()()()}if(d&2){let e=n.$implicit,c=h();t(2),E("alt",e.name),l("src",e.imageUrl?c.environment.imagesUrl+e.imageUrl:"/assets/placeholder.png",y),t(2),a(e.name),t(2),a(e.price),t(2),a(e.stock),t(2),a(e.averageRating),t(2),l("status",e.status),t(2),l("viewRoute",S(9,Q,e.productId))("editRoute",S(11,$,e.productId))}}var p=class p{constructor(n,e,c,u){this.productService=n;this.authService=e;this.toastService=c;this.confirmActionService=u}products=[];filteredProducts=[];searchTerm="";ngOnInit(){this.findAll()}findAll(){let n=this.authService.getUserId();n&&this.productService.findByUserId(n).subscribe({next:e=>{this.products=e,this.filteredProducts=e},error:()=>this.toastService.error("Error del servidor")})}delete(n){this.productService.delete(n).subscribe({next:e=>{this.findAll(),this.toastService.success("msg_success_delete")},error:e=>this.toastService.error("msg_error_server")})}onSearchChange(){let n=this.searchTerm.toLowerCase().trim();this.filteredProducts=this.products.filter(e=>e.name.toLowerCase().includes(n))}environment=U;static \u0275fac=function(e){return new(e||p)(m(q),m(N),m(j),m(B))};static \u0275cmp=C({type:p,selectors:[["app-my-product-list"]],decls:27,vars:10,consts:[[1,"main-container"],[1,"body-container"],[1,"list-page-header-container"],["title","Productos","description","Productos que has creado","saveText","Crear Producto",3,"saveRoute"],[1,"body","bg-white","h-100"],[1,"table-main-container","d-flex","flex-column","gap-3","h-60"],[1,"table-actions"],["type","text","placeholder","Buscar producto...",1,"form-control","w-auto",3,"ngModelChange","input","ngModel"],[1,"table-container"],[1,"table","sticky-header","sticky-actions"],[1,"th-image"],[1,"th-name"],[1,"th-price"],[1,"th-stock"],[1,"th-status"],[1,"th-actions","text-center"],["width","60",1,"rounded",3,"src","alt"],[3,"status"],[1,"text-center"],[3,"deleteAction","viewRoute","editRoute"]],template:function(e,c){e&1&&(r(0,"div",0)(1,"div",1)(2,"div",2),v(3,"app-list-page-header",3),i(),r(4,"div",4)(5,"div",5)(6,"div",6)(7,"input",7),A("ngModelChange",function(s){return w(c.searchTerm,s)||(c.searchTerm=s),s}),f("input",function(){return c.onSearchChange()}),i()(),r(8,"div",8)(9,"table",9)(10,"tr")(11,"th",10),o(12),i(),r(13,"th",11),o(14),i(),r(15,"th",12),o(16),i(),r(17,"th",13),o(18),i(),r(19,"th",14),o(20),i(),r(21,"th",14),o(22),i(),r(23,"th",15),o(24),i()(),I(25,J,15,13,"tr",null,G),i()()()()()()),e&2&&(t(3),l("saveRoute",M(9,H)),t(4),T("ngModel",c.searchTerm),t(5),a("Imagen"),t(2),a("Nombre"),t(2),a("Precio"),t(2),a("Stock"),t(2),a("Rating"),t(2),a("Estado"),t(2),a("Acciones"),t(),P(c.filteredProducts))},dependencies:[V,O,W,k,L,R,F],encapsulation:2})};g([D({title:"Eliminar producto",bodyQuestion:"\xBFEnserio quieres eliminar este producto?",bodyText:"Esta acci\xF3n es irreversible",confirmText:"Eliminar"})],p.prototype,"delete",1);var z=p;export{z as MyProductListComponent};
