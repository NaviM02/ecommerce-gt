import{a as A}from"./chunk-V5LHGOGP.js";import{a as R}from"./chunk-WEV7XX4Q.js";import{a as F}from"./chunk-3RHZJOR6.js";import"./chunk-FDP5RWEF.js";import{a as w}from"./chunk-5UWBJBBU.js";import{g as D,m as I,o as T,t as M}from"./chunk-HGKDJBZM.js";import{Cb as a,Db as c,Ea as C,Eb as s,Ga as d,Kb as g,La as l,Lb as b,Pa as h,Pb as P,Rb as E,Ua as v,_a as x,db as f,fb as y,gb as m,hb as p,ib as n,jb as r,kb as u,sb as S,tb as _}from"./chunk-DN3HB7UR.js";import"./chunk-PYEHUVGI.js";var j=()=>["/user","my-products"],B=e=>["/user","my-products","edit",e],N=()=>[],O=(e,t)=>t.categoryId,$=(e,t)=>t.ratingId;function H(e,t){if(e&1&&u(0,"img",7),e&2){let o=_();x("src",o.imagePreviewUrl,C)}}function q(e,t){if(e&1&&(n(0,"span",18),a(1),r()),e&2){let o=t.$implicit;d(),c(o.name)}}function z(e,t){if(e&1&&m(0,q,2,1,"span",18,O),e&2){let o=_();p(o.product.categories)}}function G(e,t){e&1&&(n(0,"span",14),a(1,"No hay categor\xEDas asignadas"),r())}function Q(e,t){e&1&&u(0,"i",21)}function V(e,t){e&1&&u(0,"i",22)}function W(e,t){if(e&1&&(n(0,"div",19)(1,"div",20),m(2,Q,1,0,"i",21,y),m(4,V,1,0,"i",22,y),n(6,"span",23),a(7),r()(),n(8,"p",24),a(9),r(),n(10,"small",14),a(11),P(12,"date"),r()()),e&2){let o=t.$implicit;d(2),p(g(6,N).constructor(o.stars)),d(2),p(g(7,N).constructor(5-o.stars)),d(3),c(o.username),d(2),c(o.comment),d(2),c(E(12,3,o.createdAt,"mediumDate"))}}function J(e,t){if(e&1&&m(0,W,13,8,"div",19,$),e&2){let o=_();p(o.product.ratings)}}function K(e,t){e&1&&(n(0,"p",14),a(1,"A\xFAn no hay comentarios para este producto."),r())}var U=class e{constructor(t,o,i,k){this.route=t;this.router=o;this.productService=i;this.toastService=k}id;product;imagePreviewUrl;ProductCondition=A;ngOnInit(){this.route.paramMap.subscribe(t=>{if(this.id=Number(t.get("id")),!this.id){this.toastService.error("Producto no encontrado"),this.router.navigate(["/user/products"]);return}this.loadProduct()})}loadProduct(){this.productService.findById(this.id).subscribe({next:t=>{this.product=t,t.imageUrl&&(this.imagePreviewUrl=M.imagesUrl+t.imageUrl)},error:t=>{if(t.status===404){this.toastService.error("El producto no existe."),this.router.navigate(["/user/products"]);return}this.toastService.error("Error al cargar el producto.")}})}onDelete(){confirm("\xBFSeguro que deseas eliminar este producto?")&&this.productService.delete(this.id).subscribe({next:t=>{this.toastService.success("Producto eliminado con \xE9xito."),this.router.navigate(["/user/products"])},error:()=>this.toastService.error("Error al eliminar el producto.")})}static \u0275fac=function(o){return new(o||e)(l(I),l(T),l(R),l(w))};static \u0275cmp=h({type:e,selectors:[["app-my-product-detail"]],decls:38,vars:16,consts:[[1,"main-container"],[1,"body-container"],[1,"detail-header-container"],[3,"deleteAction","backRoute","description","itemName","editRoute"],[1,"body","bg-white","w-100","p-4","rounded"],[1,"row","g-4","mt-3"],[1,"col-md-5","text-center",2,"min-width","350px","max-width","400px"],["alt","Imagen del producto",1,"img-fluid","rounded","border",3,"src"],[1,"col-md-7"],[1,"fw-semibold"],[1,"text-muted","mb-1"],[1,"text-success","fw-bold","mt-2"],[1,"mb-1"],[1,"mt-3"],[1,"text-muted"],[1,"my-4"],[1,"ratings","mt-4"],[1,"fw-semibold","mb-3"],[1,"badge","bg-primary-subtle","text-primary","border","mx-1"],[1,"border","rounded","p-3","mb-3","bg-light"],[1,"d-flex","align-items-center","mb-2"],[1,"fa","fa-star","text-warning","me-1"],[1,"fa-regular","fa-star","text-warning","me-1"],[1,"ms-2","fw-bold"],[1,"mb-0"]],template:function(o,i){o&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"app-detail-page-header",3),S("deleteAction",function(){return i.onDelete()}),r()(),n(4,"div",4)(5,"div",5)(6,"div",6),v(7,H,1,1,"img",7),r(),n(8,"div",8)(9,"h2",9),a(10),r(),n(11,"p",10),a(12),r(),n(13,"h4",11),a(14),r(),n(15,"p",12)(16,"strong"),a(17,"Condici\xF3n:"),r(),a(18),r(),n(19,"p",12)(20,"strong"),a(21,"Stock:"),r(),a(22),r(),n(23,"p",12)(24,"strong"),a(25,"Vendedor:"),r(),a(26),r(),n(27,"div",13)(28,"strong"),a(29,"Categor\xEDas:"),r(),v(30,z,2,0)(31,G,2,0,"span",14),r()()(),u(32,"hr",15),n(33,"div",16)(34,"h5",17),a(35,"Opiniones de compradores"),r(),v(36,J,2,0)(37,K,2,0,"p",14),r()()()()),o&2&&(d(3),x("backRoute",g(13,j))("description","Detalle del producto")("itemName",i.product?i.product.name:"")("editRoute",b(14,B,i.id)),d(4),f(i.product!=null&&i.product.imageUrl?7:-1),d(3),c(i.product==null?null:i.product.name),d(2),c(i.product==null?null:i.product.description),d(2),s("",i.product==null?null:i.product.price," GTQ"),d(4),s(" ",(i.product==null?null:i.product.condition)===i.ProductCondition.NEW?"Nuevo":"Usado",""),d(4),s(" ",i.product==null?null:i.product.stock,""),d(4),s(" ",(i.product==null?null:i.product.sellerName)||"-",""),d(4),f(i.product&&i.product.categories.length?30:31),d(6),f(i.product&&i.product.ratings.length?36:37))},dependencies:[F,D],encapsulation:2})};export{U as MyProductDetailComponent};
