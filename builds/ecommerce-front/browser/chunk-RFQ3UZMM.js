import"./chunk-BYXBJQAS.js";import{a as R}from"./chunk-WEV7XX4Q.js";import{c as E,e as D,f as F,m as N}from"./chunk-XALT67XN.js";import{a as k}from"./chunk-5UWBJBBU.js";import{h as w,p as L,t as O}from"./chunk-HGKDJBZM.js";import{Cb as c,Db as b,Ea as h,Eb as g,Ga as n,Gb as y,Hb as _,Ib as x,La as v,Lb as T,Pa as m,Pb as I,Rb as M,_a as d,fb as P,gb as s,hb as l,ib as i,jb as a,kb as p,sb as C,wb as S}from"./chunk-DN3HB7UR.js";import"./chunk-PYEHUVGI.js";var V=r=>[r];function W(r,e){r&1&&p(0,"i",6)}var u=class r{product;environment=O;getStars(e){return e?Array(Math.round(e||0)).fill(0):[]}static \u0275fac=function(o){return new(o||r)};static \u0275cmp=m({type:r,selectors:[["app-product-card"]],inputs:{product:"product"},decls:15,vars:11,consts:[[1,"card","h-100","shadow-sm","border-0","hover-card"],[1,"card-img-top","rounded-top",2,"height","200px","object-fit","cover",3,"src","alt"],[1,"card-body","d-flex","flex-column"],[1,"card-title","mb-1","text-truncate"],[1,"card-text","fw-bold","text-primary","mb-1"],[1,"mb-2"],[1,"fa","fa-star","text-warning","me-1"],[1,"text-muted","ms-1"],[1,"btn","btn-sm","btn-outline-primary","mt-auto",3,"routerLink"]],template:function(o,t){o&1&&(i(0,"div",0),p(1,"img",1),i(2,"div",2)(3,"h5",3),c(4),a(),i(5,"p",4),c(6),I(7,"number"),a(),i(8,"div",5),s(9,W,1,0,"i",6,P),i(11,"small",7),c(12),a()(),i(13,"a",8),c(14," Ver detalles "),a()()()),o&2&&(n(),S("alt",t.product.name),d("src",t.product.imageUrl?t.environment.imagesUrl+t.product.imageUrl:"/assets/placeholder.png",h),n(3),b(t.product.name),n(2),g(" Q",M(7,6,t.product.price,"1.2-2")," "),n(3),l(t.getStars(t.product.averageRating)),n(3),g(" ",t.product.averageRating?t.product.averageRating.toFixed(1):"Sin calificaciones"," "),n(),d("routerLink",T(9,V,t.product.productId)))},dependencies:[w,L],styles:[".hover-card[_ngcontent-%COMP%]{transition:all .2s ease-in-out;cursor:pointer}.hover-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 4px 20px #0000001a}"]})};var z=(r,e)=>e.productId;function Q(r,e){if(r&1&&(i(0,"div",5),p(1,"app-product-card",7),a()),r&2){let o=e.$implicit;n(),d("product",o)}}function Y(r,e){r&1&&(i(0,"div",6),c(1," No hay productos disponibles por el momento. "),a())}var A=class r{constructor(e,o){this.productService=e;this.toastService=o}products=[];filteredProducts=[];searchTerm="";ngOnInit(){this.loadProducts()}loadProducts(){this.productService.findAll(2).subscribe({next:e=>{this.products=e,this.filteredProducts=e},error:()=>this.toastService.error("Error al cargar productos.")})}onSearchChange(){let e=this.searchTerm.toLowerCase().trim();this.filteredProducts=this.products.filter(o=>o.name.toLowerCase().includes(e))}static \u0275fac=function(o){return new(o||r)(v(R),v(k))};static \u0275cmp=m({type:r,selectors:[["app-product-list"]],decls:9,vars:2,consts:[[1,"container","mt-4"],[1,"mb-4","fw-semibold"],[1,"mb-3"],["type","text","placeholder","Buscar por nombre...",1,"form-control",3,"ngModelChange","input","ngModel"],[1,"row","g-4"],[1,"col-12","col-sm-6","col-md-4","col-lg-3"],[1,"col-12","text-center","text-muted","py-5"],[3,"product"]],template:function(o,t){o&1&&(i(0,"div",0)(1,"h2",1),c(2,"Productos disponibles"),a(),i(3,"div",2)(4,"input",3),x("ngModelChange",function(f){return _(t.searchTerm,f)||(t.searchTerm=f),f}),C("input",function(){return t.onSearchChange()}),a()(),i(5,"div",4),s(6,Q,2,1,"div",5,z,!1,Y,2,0,"div",6),a()()),o&2&&(n(4),y("ngModel",t.searchTerm),n(2),l(t.filteredProducts))},dependencies:[u,N,E,D,F],encapsulation:2})};export{A as ProductListComponent};
