import{a as V}from"./chunk-BBI2T2QI.js";import{a as D}from"./chunk-RYMPJAZU.js";import"./chunk-BYXBJQAS.js";import{a as F,b as P}from"./chunk-BFNUI43J.js";import"./chunk-NCCT54UK.js";import"./chunk-FDP5RWEF.js";import{a as N}from"./chunk-NXHING3N.js";import"./chunk-IN5T55Q3.js";import{c as M,e as y,f as R,m as O}from"./chunk-XALT67XN.js";import{a as L}from"./chunk-5UWBJBBU.js";import"./chunk-HGKDJBZM.js";import{Cb as o,Db as s,Ga as i,Gb as w,Hb as T,Ib as U,Kb as A,La as d,Lb as h,Pa as C,_a as p,gb as x,hb as I,ia as _,ib as n,ja as g,jb as r,kb as b,ob as E,sb as f,tb as v}from"./chunk-DN3HB7UR.js";import{c as S}from"./chunk-PYEHUVGI.js";var k=()=>["/admin/users/add"],W=c=>["/admin/users",c],q=c=>["/admin/users/edit",c],B=(c,t)=>t.userId;function G(c,t){if(c&1){let e=E();n(0,"tr")(1,"td")(2,"div",15),o(3),r()(),n(4,"td"),o(5),r(),n(6,"td"),o(7),r(),n(8,"td"),o(9),r(),n(10,"td",16)(11,"app-table-row-action",17),f("deleteAction",function(){let u=_(e).$implicit,l=v();return g(l.delete(u.userId))}),r()()()}if(c&2){let e=t.$implicit,a=v();i(3),s(e.username),i(2),s(e.fullName),i(2),s(e.email),i(2),s(a.getRoleStr(e.role.roleId)),i(2),p("viewRoute",h(6,W,e.userId))("editRoute",h(8,q,e.userId))}}var m=class m{constructor(t,e,a){this.userService=t;this.toastService=e;this.confirmActionService=a}users=[];filteredUsers=[];searchTerm="";ngOnInit(){this.findAll()}findAll(){this.userService.findAll(void 0,2).subscribe({next:t=>{this.users=t,this.filteredUsers=t},error:()=>this.toastService.error("Error del servidor")})}delete(t){this.userService.delete(t).subscribe({next:e=>{this.findAll(),this.toastService.success("Eliminado correctamente")},error:e=>this.toastService.error("Error en el servidor")})}onSearchChange(){let t=this.searchTerm.toLowerCase().trim();this.filteredUsers=this.users.filter(e=>e.fullName.toLowerCase().includes(t))}getRoleStr(t){switch(t){case 1:return"Administrador";case 3:return"Moderador";case 4:return"Logistica";default:return""}}static \u0275fac=function(e){return new(e||m)(d(N),d(L),d(F))};static \u0275cmp=C({type:m,selectors:[["app-user-list"]],decls:23,vars:8,consts:[[1,"main-container"],[1,"body-container"],[1,"list-page-header-container"],["title","Usuarios","description","Usuarios que estan registrados en la aplicaci\xF3n","saveText","Crear Usuario",3,"saveRoute"],[1,"body","bg-white","h-100"],[1,"table-main-container","d-flex","flex-column","gap-3","h-60"],[1,"table-actions"],["type","text","placeholder","Buscar producto...",1,"form-control","w-auto",3,"ngModelChange","input","ngModel"],[1,"table-container"],[1,"table","sticky-header","sticky-actions"],[1,"th-username"],[1,"th-name"],[1,"th-email"],[1,"th-role"],[1,"th-actions","text-center"],[1,"text-secondary","fw-bold"],[1,"text-center"],[3,"deleteAction","viewRoute","editRoute"]],template:function(e,a){e&1&&(n(0,"div",0)(1,"div",1)(2,"div",2),b(3,"app-list-page-header",3),r(),n(4,"div",4)(5,"div",5)(6,"div",6)(7,"input",7),U("ngModelChange",function(l){return T(a.searchTerm,l)||(a.searchTerm=l),l}),f("input",function(){return a.onSearchChange()}),r()(),n(8,"div",8)(9,"table",9)(10,"tr")(11,"th",10),o(12),r(),n(13,"th",11),o(14),r(),n(15,"th",12),o(16),r(),n(17,"th",13),o(18),r(),n(19,"th",14),o(20),r()(),x(21,G,12,10,"tr",null,B),r()()()()()()),e&2&&(i(3),p("saveRoute",A(7,k)),i(4),w("ngModel",a.searchTerm),i(5),s("Usuario"),i(2),s("Nombre"),i(2),s("Email"),i(2),s("Role"),i(2),s("Acciones"),i(),I(a.filteredUsers))},dependencies:[D,V,O,M,y,R],styles:[".th-username[_ngcontent-%COMP%]{width:20%}.th-name[_ngcontent-%COMP%], .th-email[_ngcontent-%COMP%]{width:30%}.th-role[_ngcontent-%COMP%]{width:15%}.th-actions[_ngcontent-%COMP%]{width:5%}"]})};S([P({title:"Eliminar usuario",bodyQuestion:"\xBFEstas seguro de querer eliminar este usuario?",bodyText:"Esta acci\xF3n es irreversible.",confirmText:"Eliminar"})],m.prototype,"delete",1);var j=m;export{j as UserListComponent};
