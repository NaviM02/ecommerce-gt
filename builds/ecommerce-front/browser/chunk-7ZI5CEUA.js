import{a as I}from"./chunk-RYMPJAZU.js";import"./chunk-FDP5RWEF.js";import{f as N,k as E,t as y}from"./chunk-HGKDJBZM.js";import{Cb as a,Db as c,Eb as m,Ga as r,La as g,Pa as x,Pb as _,Qb as S,Ua as u,X as p,aa as f,db as h,gb as b,hb as v,ib as n,jb as i,kb as C,tb as d}from"./chunk-DN3HB7UR.js";import"./chunk-PYEHUVGI.js";var l=class e{constructor(t){this.http=t}baseUrl=`${y.baseUrl}/notifications`;findAll(){return this.http.get(this.baseUrl)}static \u0275fac=function(o){return new(o||e)(f(E))};static \u0275prov=p({token:e,factory:e.\u0275fac,providedIn:"root"})};var T=(e,t)=>t.notificationId;function k(e,t){e&1&&(n(0,"tr")(1,"td",8),a(2,"Cargando..."),i()())}function D(e,t){e&1&&(n(0,"tr")(1,"td",8),a(2,"No hay notificaciones"),i()())}function j(e,t){if(e&1&&(n(0,"tr")(1,"td"),a(2),i(),n(3,"td"),a(4),i(),n(5,"td"),a(6),i(),n(7,"td")(8,"span"),a(9),_(10,"titlecase"),i()(),n(11,"td"),a(12),i(),n(13,"td")(14,"span"),a(15),i()()()),e&2){let o=t.$implicit,s=t.$index,M=d(2);r(2),c(s+1),r(2),c(o.username),r(2),c(o.message),r(3),m(" ",S(10,6,o.type)," "),r(3),c(M.formatDate(o.createdAt)),r(3),m(" ",o.wasSent?"Enviada":"Pendiente"," ")}}function $(e,t){if(e&1&&b(0,j,16,8,"tr",null,T),e&2){let o=d();v(o.notifications)}}var P=class e{constructor(t){this.notificationService=t}notifications=[];loading=!1;ngOnInit(){this.loadNotifications()}loadNotifications(){this.loading=!0,this.notificationService.findAll().subscribe({next:t=>{this.notifications=t,this.loading=!1},error:()=>{this.loading=!1}})}formatDate(t){return new Date(t).toLocaleString("es-GT",{year:"numeric",month:"short",day:"2-digit",hour:"2-digit",minute:"2-digit"})}getTypeBadgeClass(t){switch(t.toLowerCase()){case"info":return"badge bg-primary";case"warning":return"badge bg-warning text-dark";case"error":return"badge bg-danger";case"success":return"badge bg-success";default:return"badge bg-success"}}static \u0275fac=function(o){return new(o||e)(g(l))};static \u0275cmp=x({type:e,selectors:[["app-notifications"]],decls:24,vars:1,consts:[[1,"main-container"],[1,"body-container"],[1,"list-page-header-container"],["title","Notificaciones","description","Listado de notificaciones enviadas a los usuarios"],[1,"body","bg-white","h-100"],[1,"table-main-container","d-flex","flex-column","gap-3","h-60"],[1,"table-container"],[1,"table","sticky-header"],["colspan","6",1,"text-center","py-3","text-muted"]],template:function(o,s){o&1&&(n(0,"div",0)(1,"div",1)(2,"div",2),C(3,"app-list-page-header",3),i(),n(4,"div",4)(5,"div",5)(6,"div",6)(7,"table",7)(8,"tr")(9,"th"),a(10,"#"),i(),n(11,"th"),a(12,"Usuario"),i(),n(13,"th"),a(14,"Mensaje"),i(),n(15,"th"),a(16,"Tipo"),i(),n(17,"th"),a(18,"Fecha"),i(),n(19,"th"),a(20,"Estado"),i()(),u(21,k,3,0,"tr")(22,D,3,0,"tr")(23,$,2,0),i()()()()()()),o&2&&(r(21),h(s.loading?21:s.notifications.length===0?22:23))},dependencies:[I,N],styles:[".table-container[_ngcontent-%COMP%]{max-height:70vh;overflow-y:auto}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#f8f9fa;font-weight:600;text-transform:uppercase;font-size:13px}table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:12px 16px;vertical-align:middle}table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f6f9ff}"]})};export{P as NotificationsComponent};
