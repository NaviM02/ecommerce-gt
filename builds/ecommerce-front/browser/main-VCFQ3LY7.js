import"./chunk-BYXBJQAS.js";import{e as W,f as X,g as Y,h as ee,k as te,l as ne}from"./chunk-NCCT54UK.js";import{a as C}from"./chunk-FDP5RWEF.js";import{a as m}from"./chunk-IN5T55Q3.js";import"./chunk-XALT67XN.js";import{a as oe}from"./chunk-5UWBJBBU.js";import{d as B,i as Z,l as q,n as y,o as u,p as T,q as J,r as K,s as Q}from"./chunk-HGKDJBZM.js";import{Cb as s,Db as p,Eb as O,Ga as r,Kb as z,La as f,Lb as U,Pa as l,Ua as _,Ub as V,_a as c,ba as d,db as D,fb as j,gb as M,hb as S,ia as N,ib as o,ja as F,jb as i,kb as g,lb as G,mb as H,ob as $,pa as L,sb as v,tb as b}from"./chunk-DN3HB7UR.js";import"./chunk-PYEHUVGI.js";var de=()=>["profile"],P=class e{constructor(n,t){this.authService=n;this.router=t}toggleSidebar=new L;fullName="";userRole="";ngOnInit(){let n=this.authService.getUsername(),t=this.authService.getUserRole();this.fullName=n??"Desconocido",this.userRole=this.roleToString(t)}onToggleSidebar(){this.toggleSidebar.emit()}logout(){this.authService.clearToken()}goToProfile(){console.log("Ir a perfil")}roleToString(n){switch(n){case 1:return"Administrador";case 2:return"Com\xFAn";case 3:return"Moderador";case 4:return"Log\xEDstica";default:return"Sin rol"}}static \u0275fac=function(t){return new(t||e)(f(m),f(u))};static \u0275cmp=l({type:e,selectors:[["app-header"]],outputs:{toggleSidebar:"toggleSidebar"},decls:34,vars:6,consts:[[1,"header-container","d-flex","align-items-center","justify-content-between","py-2","px-4","bg-primary","text-white"],[1,"d-flex","align-items-center","gap-3"],["type","button",1,"btn","btn-primary",3,"click"],[3,"size"],["src","/assets/images/logo.png","alt","Logo","height","40"],[1,"m-0","fw-bold"],["ngbDropdown","","placement","bottom-end",1,"d-inline-block"],["type","button","ngbDropdownToggle","",1,"btn","btn-primary"],[1,"user-info","text-white","align-items-center","d-flex","gap-2","pe-2"],[1,"d-none","d-md-flex","flex-column","text-end"],[1,"user-name","m-0","fw-semibold","fs-14"],[1,"user-role","text-light","m-0","fs-12"],[1,"avatar","fw-semibold","h6","m-0"],[1,"d-none","d-md-block"],["ngbDropdownMenu","",1,"dropdown-menu","dropdown-menu-end"],["ngbDropdownItem","",3,"routerLink"],[1,"d-flex","gap-2","justify-content-start","py-2"],["ngbDropdownItem","",3,"click"]],template:function(t,a){t&1&&(o(0,"div",0)(1,"div",1)(2,"button",2),v("click",function(){return a.onToggleSidebar()}),o(3,"app-material-icon",3),s(4,"menu"),i()(),o(5,"div",1),g(6,"img",4),o(7,"h5",5),s(8,"E-Commerce GT"),i()()(),o(9,"div",6)(10,"button",7)(11,"div",8)(12,"div",9)(13,"p",10),s(14),i(),o(15,"p",11),s(16),i()(),o(17,"div",12),s(18),i(),o(19,"app-material-icon",13),s(20,"expand_more"),i()()(),o(21,"div",14)(22,"button",15)(23,"div",16)(24,"app-material-icon"),s(25,"account_circle"),i(),o(26,"span"),s(27,"Mi perfil"),i()()(),o(28,"button",17),v("click",function(){return a.logout()}),o(29,"div",16)(30,"app-material-icon"),s(31,"logout"),i(),o(32,"span"),s(33,"Cerrar sesi\xF3n"),i()()()()()()),t&2&&(r(3),c("size",28),r(11),p(a.fullName),r(2),p(a.userRole),r(2),O(" ",a.fullName[0]," "),r(4),c("routerLink",z(5,de)))},dependencies:[C,ee,X,W,Y,T],styles:[".header-container[_ngcontent-%COMP%]{box-shadow:0 2px 6px #00000026}.user-info[_ngcontent-%COMP%]{border-radius:100px;cursor:pointer;transition:.3s ease}.user-info[_ngcontent-%COMP%]:hover{background-color:#ffffff1a}.user-info[_ngcontent-%COMP%]   .avatar[_ngcontent-%COMP%]{background-color:var(--bs-secondary);width:2.5rem;height:2.5rem;display:flex;justify-content:center;align-items:center;border-radius:50%;font-weight:600}"]})};var ue=e=>({active:e}),re=(e,n)=>n.label;function fe(e,n){if(e&1&&(o(0,"app-material-icon"),s(1),i()),e&2){let t=b().$implicit;r(),p(t.icon)}}function ge(e,n){if(e&1&&(o(0,"div",4)(1,"p",2),s(2),i()()),e&2){let t=n.$implicit;c("routerLink",t.route),r(2),p(t.label)}}function ve(e,n){if(e&1&&(o(0,"div",3),M(1,ge,3,2,"div",4,re),i()),e&2){let t=b().$implicit;r(),S(t.children)}}function be(e,n){if(e&1){let t=$();o(0,"div")(1,"div",1),v("click",function(){let h=N(t).$implicit,pe=b();return F(h.children?pe.toggleSubmenu(h):null)}),_(2,fe,2,1,"app-material-icon"),o(3,"p",2),s(4),i()(),_(5,ve,3,0,"div",3),i()}if(e&2){let t=n.$implicit;r(),c("routerLink",t.route||null)("routerLinkActive",t.children?"":"active"),r(),D(t.icon?2:-1),r(2),p(t.label),r(),D(t.children&&t.expanded?5:-1)}}var R=class e{constructor(n){this.authService=n}active=!1;items=[];ngOnInit(){let n=this.authService.getUserRole();this.items=this.getMenuByRole(n)}getMenuByRole(n){switch(n){case 2:return[{label:"Mis Ventas",route:"user/my-products",icon:"sell"},{label:"Comprar",route:"user/products",icon:"shopping_cart"},{label:"Mi Carrito",route:"user/cart",icon:"shopping_basket"},{label:"Tajetas",route:"user/cards",icon:"credit_card"},{label:"Mis Pedidos",route:"user/orders",icon:"local_shipping"}];case 3:return[{label:"Revisar Productos",route:"moderator/products",icon:"check_circle"}];case 4:return[{label:"Control Pedidos",route:"logistic/orders",icon:"local_shipping"}];case 1:return[{label:"Usuarios",route:"admin/users",icon:"person_add"},{label:"Reportes",icon:"bar_chart",expanded:!1,children:[{label:"Top 10 productos m\xE1s vendidos",route:"admin/reports/top-products"},{label:"Top 5 clientes con m\xE1s ganancias",route:"admin/reports/top-clients-profit"},{label:"Top 5 clientes con m\xE1s ventas",route:"admin/reports/top-clients-sales"},{label:"Top 10 clientes con m\xE1s pedidos",route:"admin/reports/top-clients-orders"},{label:"Top 10 clientes con m\xE1s productos en venta",route:"admin/reports/top-clients-products"},{label:"Sanciones",route:"admin/reports/sanctions"},{label:"Notificaciones",route:"admin/reports/notifications"}]}];default:return[]}}toggleSubmenu(n){n.expanded=!n.expanded}static \u0275fac=function(t){return new(t||e)(f(m))};static \u0275cmp=l({type:e,selectors:[["app-sidebar"]],inputs:{active:"active"},decls:3,vars:3,consts:[[1,"side-bar","pt-4",3,"ngClass"],[1,"d-flex","align-items-center","gap-2","px-4","py-1","mt-2","menu-item",3,"click","routerLink","routerLinkActive"],[1,"m-0","item-name"],[1,"submenu","mt-1"],["routerLinkActive","active",1,"d-flex","align-items-center","gap-2","px-5","py-1","menu-item","submenu-item",3,"routerLink"]],template:function(t,a){t&1&&(o(0,"div",0),M(1,be,6,5,"div",null,re),i()),t&2&&(c("ngClass",U(1,ue,a.active)),r(),S(a.items))},dependencies:[B,C,T,J],styles:[".side-bar[_ngcontent-%COMP%]{position:relative;background-color:#fff;height:100%;left:0;top:0;transition:.6s;box-shadow:0 4px 4px #00000040;overflow:hidden;width:0;z-index:100}.side-bar[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]{cursor:pointer;color:var(--bs-primary);font-weight:500;transition:color .2s}.side-bar[_ngcontent-%COMP%]   .menu-item[_ngcontent-%COMP%]:hover, .side-bar[_ngcontent-%COMP%]   .menu-item.active[_ngcontent-%COMP%]{color:var(--bs-secondary)}.side-bar[_ngcontent-%COMP%]   .submenu[_ngcontent-%COMP%]   .submenu-item[_ngcontent-%COMP%]{cursor:pointer;font-weight:400;font-size:.95rem;color:var(--bs-primary);transition:color .2s}.side-bar[_ngcontent-%COMP%]   .submenu[_ngcontent-%COMP%]   .submenu-item[_ngcontent-%COMP%]:hover{color:var(--bs-secondary)}.side-bar[_ngcontent-%COMP%]   .submenu[_ngcontent-%COMP%]   .submenu-item.active[_ngcontent-%COMP%]{color:var(--bs-secondary);font-weight:500}.side-bar[_ngcontent-%COMP%]:hover{width:20rem;overflow-y:auto}.side-bar.active[_ngcontent-%COMP%]{width:20rem}"]})};var A=class e{sidebarStatus=!1;constructor(){}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=l({type:e,selectors:[["app-main"]],decls:6,vars:1,consts:[[1,"d-flex","flex-column","vh-100"],[3,"toggleSidebar"],[1,"app-content"],[3,"active"],[1,"content-container"]],template:function(t,a){t&1&&(o(0,"div",0)(1,"app-header",1),v("toggleSidebar",function(){return a.sidebarStatus=!a.sidebarStatus}),i(),o(2,"div",2),g(3,"app-sidebar",3),o(4,"div",4),g(5,"router-outlet"),i()()()),t&2&&(r(3),c("active",a.sidebarStatus))},dependencies:[P,y,R],styles:[".app-content[_ngcontent-%COMP%]{display:flex;height:calc(100vh - 60px);position:relative;overflow:hidden}.app-content[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]{flex-grow:1;overflow-y:auto;height:100%}"]})};var ae=()=>{let e=d(m),n=d(u);return e.isLoggedIn()?(n.navigate(["/dashboard"]).then(),!1):!0};var se=()=>{let e=d(m),n=d(u);return e.isLoggedIn()?!0:(n.navigate(["/c/login"]).then(),!1)};var x=e=>()=>{let n=d(m),t=d(u),a=n.getUserRole();return a&&e.includes(a)?!0:(t.navigate(["/dashboard"]).then(),!1)};var ce=[{path:"",pathMatch:"full",redirectTo:"c/login"},{path:"c",canActivate:[ae],loadChildren:()=>import("./chunk-K3I56D7I.js").then(e=>e.signInRoutes)},{path:"",component:A,canActivate:[se],children:[{path:"dashboard",loadChildren:()=>import("./chunk-6MIFLZO7.js").then(e=>e.dashboardRoutes)},{path:"admin",canActivate:[x([1])],loadChildren:()=>import("./chunk-HEEDBG6N.js").then(e=>e.adminRoutes)},{path:"user",canActivate:[x([2])],loadChildren:()=>import("./chunk-N4D6RU7Q.js").then(e=>e.commonRoutes)},{path:"moderator",canActivate:[x([3])],loadChildren:()=>import("./chunk-6K2ASM67.js").then(e=>e.moderatorRoutes)},{path:"logistic",canActivate:[x([4])],loadChildren:()=>import("./chunk-BP6Q2LLV.js").then(e=>e.logisticRoutes)},{path:"profile",loadChildren:()=>import("./chunk-HLPQ5IPZ.js").then(e=>e.profileRoutes)}]},{path:"**",redirectTo:"c/login"}];var le={providers:[V({eventCoalescing:!0}),K(ce,Q()),q()]};function Ce(e,n){if(e&1&&(o(0,"div",2)(1,"app-material-icon"),s(2),i(),o(3,"strong",3),s(4),i()()),e&2){let t=b().$implicit;r(2),p(t.icon),r(2),p(t.header)}}function he(e,n){if(e&1&&(o(0,"ngb-toast",0),_(1,Ce,5,2,"ng-template",1),s(2),i()),e&2){let t=n.$implicit;c("delay",t.delay)("classList",t.className),r(2),O(" ",t.message," ")}}var E=class e{constructor(n){this.toastService=n}static \u0275fac=function(t){return new(t||e)(f(oe))};static \u0275cmp=l({type:e,selectors:[["app-toast"]],hostAttrs:[1,"toast-container","position-fixed","top-0","end-0","p-4",2,"z-index","1200"],decls:3,vars:0,consts:[[3,"delay","classList"],["ngbToastHeader",""],[1,"me-auto","d-flex","align-items-center","gap-1"],[1,"toast-title"]],template:function(t,a){t&1&&(G(0),M(1,he,3,3,"ngb-toast",0,j),H()),t&2&&(r(),S(a.toastService.toasts))},dependencies:[ne,te,C],styles:[".toast[_ngcontent-%COMP%]{background-color:#fff}.toast[_ngcontent-%COMP%]   .toast-title[_ngcontent-%COMP%]{font-size:1.125em}.success-toast[_ngcontent-%COMP%]{border-left:var(--bs-success) 8px solid}.success-toast[_ngcontent-%COMP%]   app-material-icon[_ngcontent-%COMP%], .success-toast[_ngcontent-%COMP%]   .toast-title[_ngcontent-%COMP%]{color:var(--bs-success)}.error-toast[_ngcontent-%COMP%]{border-left:var(--bs-danger) 8px solid}.error-toast[_ngcontent-%COMP%]   app-material-icon[_ngcontent-%COMP%], .error-toast[_ngcontent-%COMP%]   .toast-title[_ngcontent-%COMP%]{color:var(--bs-danger)}.info-toast[_ngcontent-%COMP%]{border-left:var(--bs-secondary) 8px solid}.info-toast[_ngcontent-%COMP%]   app-material-icon[_ngcontent-%COMP%], .info-toast[_ngcontent-%COMP%]   .toast-title[_ngcontent-%COMP%]{color:var(--bs-secondary)}.warning-toast[_ngcontent-%COMP%]{border-left:var(--bs-warning) 8px solid}.warning-toast[_ngcontent-%COMP%]   app-material-icon[_ngcontent-%COMP%], .warning-toast[_ngcontent-%COMP%]   .toast-title[_ngcontent-%COMP%]{color:var(--bs-warning)}"]})};var k=class e{title="ecommerce-front";static \u0275fac=function(t){return new(t||e)};static \u0275cmp=l({type:e,selectors:[["app-root"]],decls:2,vars:0,template:function(t,a){t&1&&g(0,"app-toast")(1,"router-outlet")},dependencies:[y,E],encapsulation:2})};globalThis.$localize=(e,...n)=>e.join("");Z(k,le).catch(e=>console.error(e));
