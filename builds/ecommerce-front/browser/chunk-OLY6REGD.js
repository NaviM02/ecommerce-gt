import{a as v}from"./chunk-3VFHTPS6.js";import{a as x}from"./chunk-2YJE5SZQ.js";import{a as T}from"./chunk-RYMPJAZU.js";import"./chunk-CTBSQTUV.js";import"./chunk-NCCT54UK.js";import"./chunk-FDP5RWEF.js";import"./chunk-XALT67XN.js";import"./chunk-HGKDJBZM.js";import{Cb as r,Db as c,Ga as d,Gb as g,Hb as u,Ib as _,La as f,Pa as h,Ua as C,db as P,gb as b,hb as D,ib as t,jb as n,kb as m,sb as s,tb as S}from"./chunk-DN3HB7UR.js";import"./chunk-PYEHUVGI.js";var E=(o,e)=>e.productId;function O(o,e){o&1&&(t(0,"tr")(1,"td",12),r(2,"Cargando..."),n()())}function w(o,e){o&1&&(t(0,"tr")(1,"td",12),r(2,"No hay datos"),n()())}function k(o,e){if(o&1&&(t(0,"tr")(1,"td"),r(2),n(),t(3,"td"),r(4),n(),t(5,"td"),r(6),n()()),o&2){let a=e.$implicit,i=e.$index;d(2),c(i+1),d(2),c(a.productName),d(2),c(a.totalSold)}}function I(o,e){if(o&1&&b(0,k,7,3,"tr",null,E),o&2){let a=S();D(a.products)}}var y=class o{constructor(e){this.reportService=e;let a=new Date,i=new Date(a.getFullYear(),0,1),p=new Date(a.getFullYear(),11,31);this.startDate=i.toISOString(),this.endDate=p.toISOString()}products=[];startDate;endDate;loading=!1;ngOnInit(){this.loadData()}loadData(){this.loading=!0,this.reportService.getTopProducts(this.startDate,this.endDate).subscribe({next:e=>{this.products=e,this.loading=!1},error:()=>{this.loading=!1}})}onStartDateChange(e){this.startDate=e}onEndDateChange(e){this.endDate=e}onFilter(){this.loadData()}static \u0275fac=function(a){return new(a||o)(f(x))};static \u0275cmp=h({type:o,selectors:[["app-top-products"]],decls:31,vars:3,consts:[[1,"main-container"],[1,"body-container"],[1,"list-page-header-container"],["title","Top Productos","description","Productos m\xE1s vendidos en el rango de fechas seleccionado"],[1,"body","bg-white","h-100"],[1,"table-main-container","d-flex","flex-column","gap-3","h-60"],[1,"table-actions","d-flex","align-items-center","gap-3"],[1,"form-label","fw-bold","mb-1"],[3,"modelChange","model"],[1,"btn","btn-primary",3,"click"],[1,"table-container"],[1,"table","sticky-header"],["colspan","3",1,"text-center","py-3","text-muted"]],template:function(a,i){a&1&&(t(0,"div",0)(1,"div",1)(2,"div",2),m(3,"app-list-page-header",3),n(),t(4,"div",4)(5,"div",5)(6,"div",6)(7,"div")(8,"label",7),r(9,"Fecha inicio"),n(),t(10,"app-single-datepicker",8),_("modelChange",function(l){return u(i.startDate,l)||(i.startDate=l),l}),s("modelChange",function(l){return i.onStartDateChange(l)}),n()(),t(11,"div")(12,"label",7),r(13,"Fecha fin"),n(),t(14,"app-single-datepicker",8),_("modelChange",function(l){return u(i.endDate,l)||(i.endDate=l),l}),s("modelChange",function(l){return i.onEndDateChange(l)}),n()(),t(15,"div"),m(16,"label",7),t(17,"button",9),s("click",function(){return i.onFilter()}),r(18,"Filtrar"),n()()(),t(19,"div",10)(20,"table",11)(21,"tr")(22,"th"),r(23,"#"),n(),t(24,"th"),r(25,"Producto"),n(),t(26,"th"),r(27,"Total Vendido"),n()(),C(28,O,3,0,"tr")(29,w,3,0,"tr")(30,I,2,0),n()()()()()()),a&2&&(d(10),g("model",i.startDate),d(4),g("model",i.endDate),d(14),P(i.loading?28:i.products.length===0?29:30))},dependencies:[v,T],styles:[".table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600;background-color:#f8f9fa}.table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:.75rem}.table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f1f3f5}"]})};export{y as TopProductsComponent};
