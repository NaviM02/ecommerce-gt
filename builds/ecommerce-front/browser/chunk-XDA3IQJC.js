import{a as q,b as B}from"./chunk-KCVL4ZD6.js";import{a as O}from"./chunk-CTBSQTUV.js";import{a as I}from"./chunk-GYVK5SZF.js";import{c as A}from"./chunk-QNPVVT5S.js";import"./chunk-FDP5RWEF.js";import{a as k}from"./chunk-NXHING3N.js";import"./chunk-IN5T55Q3.js";import{c as L,e as T,f as F,m as W}from"./chunk-XALT67XN.js";import{a as j}from"./chunk-5UWBJBBU.js";import{d as R,m as U,o as V}from"./chunk-HGKDJBZM.js";import{Bb as f,Cb as g,F as M,Ga as s,Gb as v,Hb as h,Ib as C,Kb as E,La as c,Lb as _,Pa as w,T as y,_a as l,ia as d,ib as t,ja as p,jb as i,kb as m,ob as N,sb as P}from"./chunk-DN3HB7UR.js";import"./chunk-PYEHUVGI.js";var x=()=>["/profile"],b=S=>({"is-invalid":S}),G=()=>["/dashboard"],D=class S{constructor(n,o,e,a){this.userService=n;this.toastService=o;this.router=e;this.route=a}user=new A;userStatus=!0;ngOnInit(){this.route.paramMap.pipe(M(n=>this.userService.findMe().pipe(y(o=>{this.user=o,this.userStatus=o.active})))).subscribe({error:n=>{if(n.status===404){this.toastService.error("El recurso al que intentas acceder no existe o fue eliminado."),this.router.navigate(["admin","users"]);return}this.toastService.error("Ocurri\xF3 un error en el servidor, porfavor intenta m\xE1s tarde.")}})}onSave(){if(!this.isValid)return this.toastService.warning("Llene todo el formulario");this.userService.save(this.user).subscribe({next:n=>{this.toastService.success("Tus cambios se guardaron con \xE9xito"),this.router.navigate(["admin","users"])},error:n=>{console.error(n),this.toastService.error("Ocurri\xF3 un error en el servidor, porfavor intenta m\xE1s tarde.")}})}get isValid(){return!!this.user.fullName?.trim()&&!!this.user.username?.trim()&&!!this.user.email?.trim()}static \u0275fac=function(o){return new(o||S)(c(k),c(j),c(V),c(U))};static \u0275cmp=w({type:S,selectors:[["app-user-profile-edit"]],decls:34,vars:27,consts:[["fullName","ngModel"],["username","ngModel"],["email","ngModel"],["phoneNumber","ngModel"],[1,"main-container"],[1,"body-container"],[1,"form-page-header-container"],[3,"title","description","backRoute"],[1,"body","bg-white","h-100"],[1,"row"],[1,"col-12","col-lg-6","mb-3"],["for","fullName",1,"form-label","required-field"],["type","text","id","fullName","placeholder","Ej. Administrador",1,"form-control",3,"ngModelChange","ngModel","maxLength","ngClass"],["for","username",1,"form-label","required-field"],["type","text","id","username","placeholder","Ej. admin",1,"form-control",3,"ngModelChange","ngModel","maxLength","ngClass"],["for","email",1,"form-label","required-field"],["type","email","id","email","placeholder","Ej. direccion@correo.com",1,"form-control",3,"ngModelChange","ngModel","maxLength","ngClass"],["for","phoneNumber",1,"form-label","required-field"],["type","text","id","phoneNumber","placeholder","Ej. 52532524",1,"form-control",3,"ngModelChange","ngModel","maxLength","ngClass"],[1,"form-actions-container"],[3,"saveAction","cancelRoute","saveText"]],template:function(o,e){if(o&1){let a=N();t(0,"div",4)(1,"div",5)(2,"div",6),m(3,"app-form-page-header",7),i(),t(4,"div",8),m(5,"app-required-indicator"),t(6,"div",9)(7,"div",10)(8,"label",11),g(9,"Nombre completo"),i(),t(10,"input",12,0),C("ngModelChange",function(r){return d(a),h(e.user.fullName,r)||(e.user.fullName=r),p(r)}),i(),m(12,"app-input-invalid-feedback"),i(),t(13,"div",10)(14,"label",13),g(15,"Usuario"),i(),t(16,"input",14,1),C("ngModelChange",function(r){return d(a),h(e.user.username,r)||(e.user.username=r),p(r)}),i(),m(18,"app-input-invalid-feedback"),i()(),t(19,"div",9)(20,"div",10)(21,"label",15),g(22,"Email"),i(),t(23,"input",16,2),C("ngModelChange",function(r){return d(a),h(e.user.email,r)||(e.user.email=r),p(r)}),i(),m(25,"app-input-invalid-feedback"),i(),t(26,"div",10)(27,"label",17),g(28,"Tel\xE9fono"),i(),t(29,"input",18,3),C("ngModelChange",function(r){return d(a),h(e.user.phone,r)||(e.user.phone=r),p(r)}),i(),m(31,"app-input-invalid-feedback"),i()(),t(32,"div",19)(33,"app-form-actions",20),P("saveAction",function(){return d(a),p(e.onSave())}),i()()()()()}if(o&2){let a=f(11),u=f(17),r=f(24),H=f(30);s(3),l("title","Editar perfil")("description","Modifica tu informaci\xF3n")("backRoute",E(17,x)),s(7),v("ngModel",e.user.fullName),l("maxLength",75)("ngClass",_(18,b,a.touched&&!(e.user.fullName&&e.user.fullName.trim()))),s(6),v("ngModel",e.user.username),l("maxLength",250)("ngClass",_(20,b,u.touched&&!(e.user.username&&e.user.username.trim()))),s(7),v("ngModel",e.user.email),l("maxLength",75)("ngClass",_(22,b,r.touched&&!(e.user.email&&e.user.email.trim()))),s(6),v("ngModel",e.user.phone),l("maxLength",250)("ngClass",_(24,b,H.touched&&!(e.user.phone&&e.user.phone.trim()))),s(4),l("cancelRoute",E(26,G))("saveText","Guardar")}},dependencies:[B,q,W,L,T,F,O,I,R],encapsulation:2})};export{D as UserProfileEditComponent};
