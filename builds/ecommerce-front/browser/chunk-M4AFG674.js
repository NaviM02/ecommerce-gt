import{b as k}from"./chunk-HP5ROPUU.js";import{a as j}from"./chunk-BBI2T2QI.js";import{a as B}from"./chunk-RYMPJAZU.js";import"./chunk-NCCT54UK.js";import"./chunk-FDP5RWEF.js";import{a as P}from"./chunk-IN5T55Q3.js";import{e as y,f as w,h as D,i as N,j as A,m as F}from"./chunk-XALT67XN.js";import{a as G}from"./chunk-5UWBJBBU.js";import{g as M,h as T}from"./chunk-HGKDJBZM.js";import{Cb as r,Db as d,Eb as C,Ga as a,Gb as I,Hb as b,Ib as L,La as l,Lb as _,Pa as S,Pb as p,Rb as u,Ua as f,_a as v,db as h,gb as g,hb as E,ib as t,jb as e,kb as c,sb as O,tb as x}from"./chunk-DN3HB7UR.js";import"./chunk-PYEHUVGI.js";var W=o=>[o],H=(o,n)=>n.orderId;function z(o,n){if(o&1&&(t(0,"tr")(1,"td"),r(2),e(),t(3,"td"),r(4),e(),t(5,"td"),r(6),p(7,"date"),e(),t(8,"td"),r(9),e(),t(10,"td"),r(11),p(12,"number"),e(),t(13,"td",14),c(14,"app-table-row-action",16),e()()),o&2){let i=n.$implicit,s=x();a(2),d(i.orderId),a(2),d(i.username),a(2),d(u(7,6,i.deliveryDate,"shortDate")),a(3),d(s.getStatusLabel(i.status)),a(2),C("",u(12,9,i.totalPrice,"1.2-2")," GTQ"),a(3),v("viewRoute",_(12,W,i.orderId))}}function Q(o,n){o&1&&(t(0,"p",15),r(1,"No hay \xF3rdenes para mostrar"),e())}var R=class o{constructor(n,i,s){this.authService=n;this.orderService=i;this.toastService=s}orders=[];filteredOrders=[];selectedStatus="ALL";ngOnInit(){this.findAll()}findAll(){let n=this.authService.getUserId();if(!n)return this.toastService.error("No hay usuario");this.orderService.findByUserId(n).subscribe({next:i=>{this.orders=i,this.filteredOrders=i},error:()=>this.toastService.error("Error del servidor")})}getStatusLabel(n){switch(n){case 1:return"En curso";case 2:return"Entregado";default:return"Desconocido"}}onStatusChange(){if(this.selectedStatus==="ALL")this.filteredOrders=this.orders;else{let n=this.selectedStatus==="COMING"?1:2;this.filteredOrders=this.orders.filter(i=>i.status===n)}}static \u0275fac=function(i){return new(i||o)(l(P),l(k),l(G))};static \u0275cmp=S({type:o,selectors:[["app-order-list"]],decls:34,vars:2,consts:[[1,"main-container"],[1,"body-container"],[1,"list-page-header-container"],["title","Historial de \xF3rdenes","description","Todas tus \xF3rdenes realizadas"],[1,"body","bg-white","h-100"],[1,"table-main-container","d-flex","flex-column","gap-3","h-60"],[1,"table-actions","d-flex","align-items-center","gap-3"],[1,"fw-bold","mb-0"],[1,"form-select","w-auto",3,"ngModelChange","change","ngModel"],["value","ALL"],["value","COMING"],["value","COMPLETED"],[1,"table-container"],[1,"table","sticky-header","sticky-actions"],[1,"text-center"],[1,"text-center","text-muted","mt-3"],[3,"viewRoute"]],template:function(i,s){i&1&&(t(0,"div",0)(1,"div",1)(2,"div",2),c(3,"app-list-page-header",3),e(),t(4,"div",4)(5,"div",5)(6,"div",6)(7,"label",7),r(8,"Filtrar por estado:"),e(),t(9,"select",8),L("ngModelChange",function(m){return b(s.selectedStatus,m)||(s.selectedStatus=m),m}),O("change",function(){return s.onStatusChange()}),t(10,"option",9),r(11,"Todos"),e(),t(12,"option",10),r(13,"En curso"),e(),t(14,"option",11),r(15,"Entregados"),e()()(),t(16,"div",12)(17,"table",13)(18,"tr")(19,"th"),r(20,"ID"),e(),t(21,"th"),r(22,"Usuario"),e(),t(23,"th"),r(24,"Entrega"),e(),t(25,"th"),r(26,"Estado"),e(),t(27,"th"),r(28,"Total"),e(),t(29,"th",14),r(30,"Acciones"),e()(),g(31,z,15,14,"tr",null,H),e(),f(33,Q,2,0,"p",15),e()()()()()),i&2&&(a(9),I("ngModel",s.selectedStatus),a(22),E(s.filteredOrders),a(2),h(s.orders.length?-1:33))},dependencies:[B,j,M,T,F,N,A,D,y,w],encapsulation:2})};export{R as OrderListComponent};
